<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SVG Dovetail Generator</title>
    <style>
        #svg-container {
            margin-top: 20px;
        }
        svg {
            border: 1px solid black;
        }
    </style>
</head>
<body>
    <h1>SVG Dovetail Generator</h1>
    <form id="dimensionForm">
        <label for="width">Width (inches):</label>
        <input type="number" id="width" name="width" step="0.01" required>
        <br>
        <label for="height">Height (inches):</label>
        <input type="number" id="height" name="height" step="0.01" required>
        <br>
        <label for="numTails">Number of Tails:</label>
        <input type="number" id="numTails" name="numTails" required>
        <br>
        <button type="button" onclick="generateSVG()">Generate SVG</button>
    </form>
    <div id="svg-container"></div>

    <script>
        function generateSVG() {
            const width = parseFloat(document.getElementById('width').value) * 96; // Convert inches to pixels (1 inch = 96 pixels)
            const height = parseFloat(document.getElementById('height').value) * 96; // Convert inches to pixels (1 inch = 96 pixels)
            const numTails = parseInt(document.getElementById('numTails').value);

            const scale = 0.25; // 1/4 scale for preview
            const scaledWidth = width * scale;
            const scaledHeight = height * scale;

            const svgContainer = document.getElementById('svg-container');
            svgContainer.innerHTML = '';

            const svgNS = "http://www.w3.org/2000/svg";
            const svg = document.createElementNS(svgNS, "svg");
            svg.setAttribute("width", scaledWidth);
            svg.setAttribute("height", scaledHeight);

            const tailWidth = width / numTails;
            const pinWidth = tailWidth / 2;
            const halfPinWidth = pinWidth / 2;
            const tailHeight = height / 2;
            const angle = Math.atan(tailHeight / halfPinWidth);
            const deltaX = tailHeight / Math.tan(angle);

            for (let i = 0; i < numTails; i++) {
                const path = document.createElementNS(svgNS, "path");

                // Coordinates for the dovetail path
                const x1 = i * tailWidth * scale;
                const x2 = (i * tailWidth + halfPinWidth) * scale;
                const x3 = ((i + 1) * tailWidth - halfPinWidth) * scale;
                const x4 = (i + 1) * tailWidth * scale;
                const y1 = 0;
                const y2 = (height - tailHeight) * scale;
                const y3 = height * scale;

                const d = `
                    M ${x1} ${y1}
                    L ${x2 - deltaX * scale} ${y2}
                    L ${x3 + deltaX * scale} ${y2}
                    L ${x4} ${y1}
                    L ${x4} ${y3}
                    L ${x3} ${y2}
                    L ${x2} ${y2}
                    L ${x1} ${y3}
                    Z
                `;

                path.setAttribute("d", d);
                path.setAttribute("fill", "none");
                path.setAttribute("stroke", "black");

                svg.appendChild(path);
            }

            svgContainer.appendChild(svg);
        }
    </script>
</body>
</html>
